Основной репозиторий, содержащий программу для отрисовки диаграмм.

**Установка:**

Для установки требуется Go 1.9
```
go get -u github.com/doctor-fate/mskix-drawer
```

**Использование:**

Для того чтобы получить информацию по использованию программы и аргументам командной строки достаточно передать флаг `-h`
```
mskix-drawer -h
```
На экран будет выведено:
```
Usage of mskix-drawer:
  -c FILE
        configuration FILE
  -i FILE
        input FILE (required)
  -l    print list of all available parsers
```

Флаг `-l` позволяет получить информацию о доступных парсерах. На экран будут выведены идентификаторы всех зарегестрированых устройств.

Флаг `-c` позволяет указать файл конфигурации, с помощью которого можно управлять различными параметрами отрисовки.
Файл конфигурации не является обязательным, если флаг `-c` не указан или конфигурация не может быть прочитана, то программа использует конфигурацию по умолчанию. 
Также не является обязательным указание всех параметров конфигурации, в таком случае 
для таких параметров будут использоваться значения по умолчанию.
Ниже приведен формат файла конфигурации и дефолтные значения для всех параметров.
```
{
    "Width" : 1024,                 // Ширина SVG документа
    "Height" : 1024,                // Высота SVG документа
    "Padding" :                     // Внутренние отступы SVG документа  
    [
        15,                         // Отступ сверху
        25,                         // Отступ справа
        50,                         // Отступ снизу
        25                          // Отступ слева
    ],
    "Title" :
    {
        "FontSize" : 44             // Размер шрифта заголовка
    },
    "Rectangle" :
    {
        "Width" : 80,               // Ширина блока, содержащего название порта
        "Height" : 20               // Высота блока, содержащего название порта
    },
    "Text" :
    {
        "FontSize" : 11             // Размер шрифта названия порта
    },
    "Arrow" :
    {
        "HorizontalLength" : 300,   // Горизонтальная длина стрелки
        "HorizontalShift" : 10,     // Горизонтальный сдвиг "наконечника" стрелки
        "VerticalShift" : 5         // Вертикальный сдвиг "наконечника" стрелки
    }
}
```

Флаг `-i` позволяет указать файл, из которого будут считываться входные данные. Данный флаг является обязательным. Если он не указан, то программа выводит на экран подсказку по использованию и завершает выполнение. Если файл не может быть прочитан, то на экран выводится ошибка и программа завершает выполнение.

SVG документ генерируется по шаблону с использованием библиотеки `quicktemplate`. 
Подробнее можно прочитать тут: https://github.com/valyala/quicktemplate

Примеры выходных диаграмм находятся в папке `examples`.

Если вся диаграмма целиком не помещается на один SVG документ, то генерируется несколько SVG документов.
Название выходного файла имеет вид: `ID#D#N.svg`, где `ID` - идентификатор устройства, `D` - дата и время генерации в формате `YYYYMMDDhhmmss`, `N` - номер SVG документа (в случае если их больше одного)